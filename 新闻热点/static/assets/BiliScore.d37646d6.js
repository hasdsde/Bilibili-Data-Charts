import{ab as y,r as t,u as x,ac as f,ai as w,aq as o,ar as n,ad as k,as as F,ag as i,ae as u,a8 as B,N as C,ah as N}from"./index.8befc074.js";import{Q as A,S as D,e as E,U as S}from"./index.esm.min.693d1109.js";import"./index.39271fb6.js";import{a as q}from"./axios.c5028208.js";import"./QCardSection.2d2ea643.js";import"./use-dark.f161162c.js";import"./format.9e780ee0.js";import"./use-timeout.7d9ad920.js";const P={class:"q-mt-lg tmp"},Q={class:"row"},V=o("div",{class:"col-1"},null,-1),T={class:"col-6"},z=o("div",{class:"col-1"},null,-1),U={class:"q-pa-md fit row wrap justify-center items-center content-center"},R=y({__name:"BiliScore",setup(j){let c=t(!0);x(()=>{c.value=!1});const h={sortby:"score",rowsPerPage:"50"};function d(r){const a=[];return r.forEach((e,l)=>{if(e.order.includes("\u4EBF")){e.order=e.order.replace(/[^0-9.]/ig,"");const b=Number.parseFloat(e.order)*1e4;e.order=b.toString()}e.score==""&&(e.score=0),e.order=e.order.replace(/[^0-9.]/ig,""),a.push({name:e.title,value:Number.parseFloat(e.order),link:e.link,score:Number.parseFloat(e.score),index:l})}),console.log(a),a.sort((e,l)=>e.score-l.score)}let p=t([]),s=t([]);const _=t([]),m=t([]);q.get("/bili_bangumi_list").then(r=>{p.value=d(r.data.data.list),s.value=d(r.data.data.list),s.value.sort((a,e)=>e.score-a.score),p.value.forEach(a=>{_.value.push(a.name),m.value.push(a.score)})}),B(S,"white");const g=t({title:{text:"\u756A\u5267\u8BC4\u5206\u6392\u884C"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:_},series:[{name:"\u5206\u6570",type:"bar",data:m}]}),v=[{name:"index",label:"#",field:"index",align:"center"},{name:"name",required:!0,label:"\u6807\u9898",align:"left",field:"name",sortable:!0},{name:"play",align:"center",label:"\u64AD\u653E\u91CF(\u5355\u4F4D\uFF1A\u4E07)",field:"value",sortable:!0},{name:"score",label:"\u8BC4\u5206",field:"score",sortable:!0},{name:"link",label:"\u94FE\u63A5",field:"link",align:"center"}];return(r,a)=>(f(),w("div",P,[o("div",Q,[V,o("div",T,[n(c)?(f(),k(n(D),{key:0,class:"chart",option:g.value,autoresize:""},null,8,["option"])):F("",!0)]),z]),o("div",U,[i(A,{style:{width:"50vw"},title:"\u756A\u5267\u5206\u6570\u6392\u884C",rows:n(s),columns:v,pagination:h,"row-key":"index"},{"body-cell-link":u(e=>[i(E,{props:e},{default:u(()=>[i(C,{color:"primary",size:"sm",href:e.value,target:"_blank"},{default:u(()=>[N("\u8DF3\u8F6C")]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:1},8,["rows"])])]))}});export{R as default};
